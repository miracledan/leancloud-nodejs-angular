!function(){"use strict";angular.module("app",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","restangular","ui.router","toastr"])}(),function(){"use strict";function t(t,e){function n(e,n,o){t.debug("Debug: "+e,n)}function o(n,o,r){e.info(n,r),t.info("Info: "+n,o)}function r(n,o,r){e.success(n,r),t.info("Success: "+n,o)}function a(n,o,r){e.warning(n,r),t.warn("Warning: "+n,o)}function u(n,o,r){e.error(n,r),t.error("Error: "+n,o)}var i={showToasts:!0,debug:n,info:o,success:r,warning:a,error:u,log:t.log};return i}angular.module("app").factory("logger",t),t.$inject=["$log","toastr"]}(),function(){"use strict";function t(){return function(t,e,n){e=parseInt(e),n=parseInt(n);for(var o=e;n>=o;o++)t.push(o);return t}}function e(t){return function(e){var n=864e5,o=36e5;if(!e)return"未知时间";if(e=new Date(e),null==e.toJSON())return"未知时间";var r=new Date,a=r.getTime()-e.getTime();if(0>a)return"1分钟前";var u=Math.floor(a/n);if(u>=7)return t("date")(e,"yyyy-MM-dd");if(a/n>=1)return u+"天前";if(a/o>=1){var i=Math.floor(a/o);return i+"小时前"}var l=Math.floor(a/6e4);return l+"分钟前"}}function n(){return function(t,e){return 0===t?"0":isNaN(parseFloat(t))||!isFinite(t)?"-":("undefined"==typeof e&&(e=1),o(t,e))}}function o(t,e){if(0==t)return t;var n=["","k","M","B"],o=Math.floor(Math.log(t)/Math.log(1e3)),r=(t/Math.pow(1e3,Math.floor(o))).toFixed(e);return(r.match(/\.0*$/)?r.substr(0,r.indexOf(".")):r)+n[o]}e.$inject=["$filter"],angular.module("app").filter("range",t).filter("timeAgo",e).filter("megaNum",n)}(),function(){"use strict";function t(t,e,n,o,r){n.setErrorInterceptor(function(t,n,o,a,u){return 500===t.status?(e.warn("亲，出了点问题，请稍后再试！"),r.error("亲，出了点问题，请稍后再试！","提示"),!0):!0});var a={};return a}t.$inject=["$q","$log","Restangular","$state","toastr"],angular.module("app").factory("dataservice",t)}(),function(){"use strict";function t(t,e,n,o,r,a,u){function i(e,n){return t.register(e,n).then(f,p)}function l(e,n){return t.login(e,n).then(f,p)}function c(){d(),n.success("退出成功，欢迎再次访问！","提醒")}function s(t,e){null==t?o.defaults.headers.common.Authorization="":void 0==e?o.defaults.headers.common.Authorization="ApiKey "+t+":":o.defaults.headers.common.Authorization="ApiKey "+t+":"+e}function f(t){return"ERROR"==t.status?(n.error(t.message,"错误"),u.reject()):(g(t.data),void n.success(t.data.username+"，欢迎访问！","提醒"))}function p(t){d(),a.error("登录失败")}function g(t){m(t.api_key,t.username),v()}function d(){h(),v()}function m(t,e){r.put("token",t),r.put("username",e)}function v(){var t=r.get("token"),e=r.get("username");t&&e?($.logined=!0,$.username=e,s(e,t)):($.logined=!1,$.username=null,s(null))}function h(){r.remove("token"),r.remove("username")}var $={logined:!1,register:i,login:l,logout:c,loadCookie:v};return $}function e(t,e,n,o){e.loadCookie(),n.$on("$stateChangeStart",function(n,r,a,u,i){"app.profile"!==r.name||e.logined||(o.info("请先登录","提醒"),t.go("app.login"),n.preventDefault())})}t.$inject=["dataservice","$state","toastr","$http","$cookies","logger","$q"],e.$inject=["$state","authservice","$rootScope","toastr"],angular.module("app").factory("authservice",t).run(e)}(),function(){"use strict";function t(t,e){function n(){}n()}angular.module("app").controller("TopnavController",t),t.$inject=["$state","logger"]}(),function(){"use strict";function t(t,e){function n(){t.debug("Welcome!",null)}n()}angular.module("app").controller("ShellController",t),t.$inject=["logger","$rootScope"]}(),function(){"use strict";function t(t,e,n){function o(){}o()}angular.module("app").controller("FooterController",t),t.$inject=["$scope","$state","logger"]}(),function(){"use strict";function t(){function t(){}t()}angular.module("app").controller("MainController",t)}(),function(){"use strict";function t(t){t.debug("runBlock end")}function e(t,e,n,o,r){o.$on("$stateChangeSuccess",function(){r.scrollTo(0,0)})}t.$inject=["logger"],e.$inject=["dataservice","$state","toastr","$rootScope","$window"],angular.module("app").run(t).run(e)}(),function(){"use strict";function t(t,e){t.state("app",{url:"/",views:{"":{templateUrl:"app/layout/shell.html",controller:"ShellController",controllerAs:"vm"},"topnav@app":{templateUrl:"app/layout/topnav.html",controller:"TopnavController",controllerAs:"vm"},"content@app":{templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"vm"},"footer@app":{templateUrl:"app/layout/footer.html",controller:"FooterController",controllerAs:"vm"}}}),e.otherwise("/")}t.$inject=["$stateProvider","$urlRouterProvider"],angular.module("app").config(t)}(),function(){"use strict";angular.module("app").constant("moment",moment).constant("appServer","http://www.qianhaikeji.cn")}(),function(){"use strict";function t(t,e,n,o,r,a){t.debugEnabled(!0),r.allowHtml=!0,r.timeOut=3e3,r.positionClass="toast-top-right",r.preventDuplicates=!0,r.progressBar=!0,n.setBaseUrl(o),a.decorator("$uiViewScroll",["$delegate",function(t){return function(t){}}]),e.html5Mode(!0),e.hashPrefix("!")}t.$inject=["$logProvider","$locationProvider","RestangularProvider","appServer","toastrConfig","$provide"],angular.module("app").config(t)}(),angular.module("app").run(["$templateCache",function(t){t.put("app/layout/footer.html",""),t.put("app/layout/shell.html",'<header class="clearfix"><div ui-view="topnav" id="top"></div></header><div class="content"><div ui-view="content" autoscroll="true"></div></div><footer><div ui-view="footer"></div></footer>'),t.put("app/layout/topnav.html",""),t.put("app/main/main.html","<div>hello,success!</div>")}]);